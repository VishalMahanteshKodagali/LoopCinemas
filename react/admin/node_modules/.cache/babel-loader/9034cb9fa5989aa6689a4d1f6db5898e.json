{"ast":null,"code":"var _jsxFileName = \"/Users/vishalmahanteshkodagali/Documents/RMIT/Sem 3/Full Stack Development/Assignment/Git_s3895036/loop-web-s3904406/react/admin/src/pages/Reservations.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport gql from \"graphql-tag\";\nimport { Bar } from \"react-chartjs-2\";\nimport \"../Style/reservations.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GET_RESERVATIONS = gql`\n  query GetReservations {\n    getReservations {\n      reservation_id\n      reservation_ticket_count\n      username\n      session_id\n    }\n  }\n`;\nconst GET_SESSIONS = gql`\n  query GetSessions {\n    getSessions {\n      session_id\n      session_time\n      session_ticket_count\n      movie_id\n    }\n  }\n`;\nconst GET_MOVIES_QUERY = gql`\n  query GetMovies {\n    getMovies {\n      movie_id\n      movie_name\n      image\n      corouselImage\n    }\n  }\n`;\nexport default function Reservations() {\n  _s();\n\n  const {\n    data: reservationData\n  } = useQuery(GET_RESERVATIONS);\n  const {\n    data: sessionData\n  } = useQuery(GET_SESSIONS);\n  const {\n    data: movieData\n  } = useQuery(GET_MOVIES_QUERY);\n  const [showTable, setShowTable] = useState(false);\n\n  const handleChartClick = () => {\n    setShowTable(!showTable);\n  };\n\n  if (!reservationData || !sessionData || !movieData) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 12\n    }, this);\n  }\n\n  const movieReservations = {};\n  reservationData.getReservations.forEach(reservation => {\n    const session = sessionData.getSessions.find(s => s.session_id === reservation.session_id);\n    const movie = movieData.getMovies.find(m => m.movie_id === session.movie_id);\n\n    if (!movieReservations[movie.movie_name]) {\n      movieReservations[movie.movie_name] = 0;\n    }\n\n    movieReservations[movie.movie_name] += reservation.reservation_ticket_count;\n  });\n  const chartData = {\n    labels: Object.keys(movieReservations),\n    datasets: [{\n      label: \"Reservations\",\n      data: Object.values(movieReservations),\n      backgroundColor: \"rgba(75, 192, 192, 0.2)\",\n      borderColor: \"rgba(75, 192, 192, 1)\",\n      borderWidth: 1\n    }]\n  };\n\n  const getSessionDetail = function (session_id) {\n    let detail = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"movie_name\";\n    const session = sessionData.getSessions.find(s => s.session_id === session_id);\n    if (!session) return null;\n\n    if (detail === \"movie_name\") {\n      const movie = movieData.getMovies.find(m => m.movie_id === session.movie_id);\n      return movie ? movie.movie_name : null;\n    }\n\n    if (detail === \"session_time\") {\n      return session.session_time;\n    }\n\n    return null;\n  };\n\n  const getMovieName = session_id => {\n    const session = sessionData.getSessions.find(s => s.session_id === session_id);\n    if (!session) return null;\n    const movie = movieData.getMovies.find(m => m.movie_id === session.movie_id);\n    return movie ? movie.movie_name : null;\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bar-char-tickets-per-movies\",\n      onClick: handleChartClick,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Tickets reservations per Movie\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Bar, {\n        data: chartData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Click on the chart for more details...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), showTable && /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table-reservations\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Reservation ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Ticket Count\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Session ID & Time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Movie Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: reservationData.getReservations.map(reservation => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: reservation.reservation_id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: reservation.reservation_ticket_count\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: reservation.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: \"ID:\" + reservation.session_id + \" \" + \"Session Time:\" + getSessionDetail(reservation.session_id, \"session_time\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: getMovieName(reservation.session_id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 17\n          }, this)]\n        }, reservation.reservation_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Reservations, \"+F3f5IyllstWPGjX9a3hxI7XdUs=\", false, function () {\n  return [useQuery, useQuery, useQuery];\n});\n\n_c = Reservations;\n\nvar _c;\n\n$RefreshReg$(_c, \"Reservations\");","map":{"version":3,"names":["React","useState","useQuery","useMutation","gql","Bar","GET_RESERVATIONS","GET_SESSIONS","GET_MOVIES_QUERY","Reservations","data","reservationData","sessionData","movieData","showTable","setShowTable","handleChartClick","movieReservations","getReservations","forEach","reservation","session","getSessions","find","s","session_id","movie","getMovies","m","movie_id","movie_name","reservation_ticket_count","chartData","labels","Object","keys","datasets","label","values","backgroundColor","borderColor","borderWidth","getSessionDetail","detail","session_time","getMovieName","map","reservation_id","username"],"sources":["/Users/vishalmahanteshkodagali/Documents/RMIT/Sem 3/Full Stack Development/Assignment/Git_s3895036/loop-web-s3904406/react/admin/src/pages/Reservations.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useQuery, useMutation } from \"@apollo/client\";\nimport gql from \"graphql-tag\";\nimport { Bar } from \"react-chartjs-2\";\nimport \"../Style/reservations.css\";\n\nconst GET_RESERVATIONS = gql`\n  query GetReservations {\n    getReservations {\n      reservation_id\n      reservation_ticket_count\n      username\n      session_id\n    }\n  }\n`;\n\nconst GET_SESSIONS = gql`\n  query GetSessions {\n    getSessions {\n      session_id\n      session_time\n      session_ticket_count\n      movie_id\n    }\n  }\n`;\n\nconst GET_MOVIES_QUERY = gql`\n  query GetMovies {\n    getMovies {\n      movie_id\n      movie_name\n      image\n      corouselImage\n    }\n  }\n`;\n\nexport default function Reservations() {\n  const { data: reservationData } = useQuery(GET_RESERVATIONS);\n  const { data: sessionData } = useQuery(GET_SESSIONS);\n  const { data: movieData } = useQuery(GET_MOVIES_QUERY);\n  const [showTable, setShowTable] = useState(false);\n\n  const handleChartClick = () => {\n    setShowTable(!showTable);\n  };\n\n  if (!reservationData || !sessionData || !movieData) {\n    return <p>Loading...</p>;\n  }\n\n  const movieReservations = {};\n\n  reservationData.getReservations.forEach((reservation) => {\n    const session = sessionData.getSessions.find(\n      (s) => s.session_id === reservation.session_id\n    );\n    const movie = movieData.getMovies.find(\n      (m) => m.movie_id === session.movie_id\n    );\n\n    if (!movieReservations[movie.movie_name]) {\n      movieReservations[movie.movie_name] = 0;\n    }\n    movieReservations[movie.movie_name] += reservation.reservation_ticket_count;\n  });\n  const chartData = {\n    labels: Object.keys(movieReservations),\n    datasets: [\n      {\n        label: \"Reservations\",\n        data: Object.values(movieReservations),\n        backgroundColor: \"rgba(75, 192, 192, 0.2)\",\n        borderColor: \"rgba(75, 192, 192, 1)\",\n        borderWidth: 1,\n      },\n    ],\n  };\n\n  const getSessionDetail = (session_id, detail = \"movie_name\") => {\n    const session = sessionData.getSessions.find(\n      (s) => s.session_id === session_id\n    );\n    if (!session) return null;\n\n    if (detail === \"movie_name\") {\n      const movie = movieData.getMovies.find(\n        (m) => m.movie_id === session.movie_id\n      );\n      return movie ? movie.movie_name : null;\n    }\n\n    if (detail === \"session_time\") {\n      return session.session_time;\n    }\n\n    return null;\n  };\n\n  const getMovieName = (session_id) => {\n    const session = sessionData.getSessions.find(\n      (s) => s.session_id === session_id\n    );\n    if (!session) return null;\n    const movie = movieData.getMovies.find(\n      (m) => m.movie_id === session.movie_id\n    );\n    return movie ? movie.movie_name : null;\n  };\n\n  return (\n    <>\n      <div className=\"bar-char-tickets-per-movies\" onClick={handleChartClick}>\n        <h3>Tickets reservations per Movie</h3>\n        <Bar data={chartData} />\n        <p>Click on the chart for more details...</p>\n      </div>\n      {showTable && (\n        <table className=\"table-reservations\">\n          <thead>\n            <tr>\n              <th>Reservation ID</th>\n              <th>Ticket Count</th>\n              <th>Username</th>\n              <th>Session ID & Time</th>\n              <th>Movie Name</th>\n            </tr>\n          </thead>\n          <tbody>\n            {reservationData.getReservations.map((reservation) => (\n              <tr key={reservation.reservation_id}>\n                <td>{reservation.reservation_id}</td>\n                <td>{reservation.reservation_ticket_count}</td>\n                <td>{reservation.username}</td>\n                <td>\n                  {\"ID:\" +\n                    reservation.session_id +\n                    \" \" +\n                    \"Session Time:\" +\n                    getSessionDetail(reservation.session_id, \"session_time\")}\n                </td>\n                <td>{getMovieName(reservation.session_id)}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      )}\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}