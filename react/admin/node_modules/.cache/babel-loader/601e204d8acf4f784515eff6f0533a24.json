{"ast":null,"code":"var _jsxFileName = \"/Users/vishalmahanteshkodagali/Documents/RMIT/Sem 3/Full Stack Development/Assignment/Git_s3895036/loop-web-s3904406/react/admin/src/pages/Reservations.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useQuery, useMutation } from '@apollo/client';\nimport gql from 'graphql-tag';\nimport { Bar } from 'react-chartjs-2';\nimport '../Style/reservations.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GET_RESERVATIONS = gql`\n  query GetReservations {\n    getReservations {\n      reservation_id\n      reservation_ticket_count\n      username\n      session_id\n    }\n  }\n`;\nconst GET_SESSIONS = gql`\n    query GetSessions {\n        getSessions {\n        session_id\n        session_time\n        session_ticket_count\n        movie_id\n    }\n}\n`;\nconst GET_MOVIES_QUERY = gql`\n  query GetMovies {\n    getMovies {\n      movie_id\n      movie_name\n      image\n      corouselImage\n    }\n  }\n`;\nexport default function Reservations() {\n  _s();\n\n  const {\n    data: reservationData\n  } = useQuery(GET_RESERVATIONS);\n  const {\n    data: sessionData\n  } = useQuery(GET_SESSIONS);\n  const {\n    data: movieData\n  } = useQuery(GET_MOVIES_QUERY);\n  const [showTable, setShowTable] = useState(false);\n\n  const handleChartClick = () => {\n    setShowTable(!showTable);\n  };\n\n  if (!reservationData || !sessionData || !movieData) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 14\n    }, this);\n  }\n\n  const movieReservations = {};\n  reservationData.getReservations.forEach(reservation => {\n    const session = sessionData.getSessions.find(s => s.session_id === reservation.session_id);\n    const movie = movieData.getMovies.find(m => m.movie_id === session.movie_id);\n\n    if (!movieReservations[movie.movie_name]) {\n      movieReservations[movie.movie_name] = 0;\n    }\n\n    movieReservations[movie.movie_name] += reservation.reservation_ticket_count;\n  });\n  const chartData = {\n    labels: Object.keys(movieReservations),\n    datasets: [{\n      label: 'Reservations',\n      data: Object.values(movieReservations),\n      backgroundColor: 'rgba(75, 192, 192, 0.2)',\n      borderColor: 'rgba(75, 192, 192, 1)',\n      borderWidth: 1\n    }]\n  };\n\n  const getSessionDetail = function (session_id) {\n    let detail = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"movie_name\";\n    const session = sessionData.getSessions.find(s => s.session_id === session_id);\n    if (!session) return null;\n\n    if (detail === \"movie_name\") {\n      const movie = movieData.getMovies.find(m => m.movie_id === session.movie_id);\n      return movie ? movie.movie_name : null;\n    }\n\n    if (detail === \"session_time\") {\n      return session.session_time;\n    }\n\n    return null;\n  };\n\n  const getMovieName = session_id => {\n    const session = sessionData.getSessions.find(s => s.session_id === session_id);\n    if (!session) return null;\n    const movie = movieData.getMovies.find(m => m.movie_id === session.movie_id);\n    return movie ? movie.movie_name : null;\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bar-char-tickets-per-movies\",\n      onClick: handleChartClick,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Tickets reservations per Movie\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Bar, {\n        data: chartData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Click on the chart for more details...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this), showTable && /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table-reservations\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Reservation ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Ticket Count\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Session ID & Time\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Movie Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 16\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 14\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 12\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: reservationData.getReservations.map(reservation => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: reservation.reservation_id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: reservation.reservation_ticket_count\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: reservation.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: \"ID:\" + reservation.session_id + \" \" + \"Session Time:\" + getSessionDetail(reservation.session_id, \"session_time\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: getMovieName(reservation.session_id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 18\n          }, this)]\n        }, reservation.reservation_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 16\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 12\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 10\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Reservations, \"+F3f5IyllstWPGjX9a3hxI7XdUs=\", false, function () {\n  return [useQuery, useQuery, useQuery];\n});\n\n_c = Reservations;\n\nvar _c;\n\n$RefreshReg$(_c, \"Reservations\");","map":{"version":3,"names":["React","useState","useQuery","useMutation","gql","Bar","GET_RESERVATIONS","GET_SESSIONS","GET_MOVIES_QUERY","Reservations","data","reservationData","sessionData","movieData","showTable","setShowTable","handleChartClick","movieReservations","getReservations","forEach","reservation","session","getSessions","find","s","session_id","movie","getMovies","m","movie_id","movie_name","reservation_ticket_count","chartData","labels","Object","keys","datasets","label","values","backgroundColor","borderColor","borderWidth","getSessionDetail","detail","session_time","getMovieName","map","reservation_id","username"],"sources":["/Users/vishalmahanteshkodagali/Documents/RMIT/Sem 3/Full Stack Development/Assignment/Git_s3895036/loop-web-s3904406/react/admin/src/pages/Reservations.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useQuery, useMutation } from '@apollo/client';\nimport gql from 'graphql-tag';\nimport { Bar } from 'react-chartjs-2';\nimport '../Style/reservations.css'; \n\nconst GET_RESERVATIONS = gql`\n  query GetReservations {\n    getReservations {\n      reservation_id\n      reservation_ticket_count\n      username\n      session_id\n    }\n  }\n`;\n\nconst GET_SESSIONS = gql`\n    query GetSessions {\n        getSessions {\n        session_id\n        session_time\n        session_ticket_count\n        movie_id\n    }\n}\n`;\n\nconst GET_MOVIES_QUERY = gql`\n  query GetMovies {\n    getMovies {\n      movie_id\n      movie_name\n      image\n      corouselImage\n    }\n  }\n`;\n\n\nexport default function Reservations() {\n    const { data: reservationData } = useQuery(GET_RESERVATIONS);\n    const { data: sessionData } = useQuery(GET_SESSIONS);\n    const { data: movieData } = useQuery(GET_MOVIES_QUERY);\n    const [showTable, setShowTable] = useState(false);\n\n    const handleChartClick = () => {\n        setShowTable(!showTable); \n    };\n\n  \n    if (!reservationData || !sessionData || !movieData) {\n      return <p>Loading...</p>;\n    }\n\n    const movieReservations = {};\n\n    reservationData.getReservations.forEach(reservation => {\n        const session = sessionData.getSessions.find(s => s.session_id === reservation.session_id);\n        const movie = movieData.getMovies.find(m => m.movie_id === session.movie_id);\n\n        if (!movieReservations[movie.movie_name]) {\n            movieReservations[movie.movie_name] = 0;\n        }\n        movieReservations[movie.movie_name] += reservation.reservation_ticket_count;\n    });\n    const chartData = {\n        labels: Object.keys(movieReservations),\n        datasets: [{\n            label: 'Reservations',\n            data: Object.values(movieReservations),\n            backgroundColor: 'rgba(75, 192, 192, 0.2)',\n            borderColor: 'rgba(75, 192, 192, 1)',\n            borderWidth: 1\n        }]\n    };\n\n    const getSessionDetail = (session_id, detail = \"movie_name\") => {\n        const session = sessionData.getSessions.find(s => s.session_id === session_id);\n        if (!session) return null;\n    \n        if (detail === \"movie_name\") {\n            const movie = movieData.getMovies.find(m => m.movie_id === session.movie_id);\n            return movie ? movie.movie_name : null;\n        }\n    \n        if (detail === \"session_time\") {\n            return session.session_time;\n        }\n    \n        return null;\n    };\n    \n\n\n\n  \n    const getMovieName = (session_id) => {\n      const session = sessionData.getSessions.find(s => s.session_id === session_id);\n      if (!session) return null;\n      const movie = movieData.getMovies.find(m => m.movie_id === session.movie_id);\n      return movie ? movie.movie_name : null;\n    };\n\n    return (\n        <>\n        <div className='bar-char-tickets-per-movies' onClick={handleChartClick}>\n            <h3>Tickets reservations per Movie</h3>\n            <Bar data={chartData} />\n            <p>Click on the chart for more details...</p>\n        </div>\n        {showTable && (\n         <table className='table-reservations'>\n           <thead>\n             <tr>\n               <th>Reservation ID</th>\n               <th>Ticket Count</th>\n               <th>Username</th>\n               <th>Session ID & Time</th>\n               <th>Movie Name</th>\n             </tr>\n           </thead>\n           <tbody>\n             {reservationData.getReservations.map(reservation => (\n               <tr key={reservation.reservation_id}>\n                 <td>{reservation.reservation_id}</td>\n                 <td>{reservation.reservation_ticket_count}</td>\n                 <td>{reservation.username}</td>\n                 <td>{\"ID:\"+reservation.session_id+\" \"+\"Session Time:\"+getSessionDetail(reservation.session_id, \"session_time\")}</td>\n                 <td>{getMovieName(reservation.session_id)}</td>\n               </tr>\n             ))}\n           </tbody>\n         </table>\n        )}\n        </>\n       );\n}\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,gBAAtC;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAASC,GAAT,QAAoB,iBAApB;AACA,OAAO,2BAAP;;;AAEA,MAAMC,gBAAgB,GAAGF,GAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CATA;AAWA,MAAMG,YAAY,GAAGH,GAAI;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CATA;AAWA,MAAMI,gBAAgB,GAAGJ,GAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CATA;AAYA,eAAe,SAASK,YAAT,GAAwB;EAAA;;EACnC,MAAM;IAAEC,IAAI,EAAEC;EAAR,IAA4BT,QAAQ,CAACI,gBAAD,CAA1C;EACA,MAAM;IAAEI,IAAI,EAAEE;EAAR,IAAwBV,QAAQ,CAACK,YAAD,CAAtC;EACA,MAAM;IAAEG,IAAI,EAAEG;EAAR,IAAsBX,QAAQ,CAACM,gBAAD,CAApC;EACA,MAAM,CAACM,SAAD,EAAYC,YAAZ,IAA4Bd,QAAQ,CAAC,KAAD,CAA1C;;EAEA,MAAMe,gBAAgB,GAAG,MAAM;IAC3BD,YAAY,CAAC,CAACD,SAAF,CAAZ;EACH,CAFD;;EAKA,IAAI,CAACH,eAAD,IAAoB,CAACC,WAArB,IAAoC,CAACC,SAAzC,EAAoD;IAClD,oBAAO;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAP;EACD;;EAED,MAAMI,iBAAiB,GAAG,EAA1B;EAEAN,eAAe,CAACO,eAAhB,CAAgCC,OAAhC,CAAwCC,WAAW,IAAI;IACnD,MAAMC,OAAO,GAAGT,WAAW,CAACU,WAAZ,CAAwBC,IAAxB,CAA6BC,CAAC,IAAIA,CAAC,CAACC,UAAF,KAAiBL,WAAW,CAACK,UAA/D,CAAhB;IACA,MAAMC,KAAK,GAAGb,SAAS,CAACc,SAAV,CAAoBJ,IAApB,CAAyBK,CAAC,IAAIA,CAAC,CAACC,QAAF,KAAeR,OAAO,CAACQ,QAArD,CAAd;;IAEA,IAAI,CAACZ,iBAAiB,CAACS,KAAK,CAACI,UAAP,CAAtB,EAA0C;MACtCb,iBAAiB,CAACS,KAAK,CAACI,UAAP,CAAjB,GAAsC,CAAtC;IACH;;IACDb,iBAAiB,CAACS,KAAK,CAACI,UAAP,CAAjB,IAAuCV,WAAW,CAACW,wBAAnD;EACH,CARD;EASA,MAAMC,SAAS,GAAG;IACdC,MAAM,EAAEC,MAAM,CAACC,IAAP,CAAYlB,iBAAZ,CADM;IAEdmB,QAAQ,EAAE,CAAC;MACPC,KAAK,EAAE,cADA;MAEP3B,IAAI,EAAEwB,MAAM,CAACI,MAAP,CAAcrB,iBAAd,CAFC;MAGPsB,eAAe,EAAE,yBAHV;MAIPC,WAAW,EAAE,uBAJN;MAKPC,WAAW,EAAE;IALN,CAAD;EAFI,CAAlB;;EAWA,MAAMC,gBAAgB,GAAG,UAACjB,UAAD,EAAuC;IAAA,IAA1BkB,MAA0B,uEAAjB,YAAiB;IAC5D,MAAMtB,OAAO,GAAGT,WAAW,CAACU,WAAZ,CAAwBC,IAAxB,CAA6BC,CAAC,IAAIA,CAAC,CAACC,UAAF,KAAiBA,UAAnD,CAAhB;IACA,IAAI,CAACJ,OAAL,EAAc,OAAO,IAAP;;IAEd,IAAIsB,MAAM,KAAK,YAAf,EAA6B;MACzB,MAAMjB,KAAK,GAAGb,SAAS,CAACc,SAAV,CAAoBJ,IAApB,CAAyBK,CAAC,IAAIA,CAAC,CAACC,QAAF,KAAeR,OAAO,CAACQ,QAArD,CAAd;MACA,OAAOH,KAAK,GAAGA,KAAK,CAACI,UAAT,GAAsB,IAAlC;IACH;;IAED,IAAIa,MAAM,KAAK,cAAf,EAA+B;MAC3B,OAAOtB,OAAO,CAACuB,YAAf;IACH;;IAED,OAAO,IAAP;EACH,CAdD;;EAoBA,MAAMC,YAAY,GAAIpB,UAAD,IAAgB;IACnC,MAAMJ,OAAO,GAAGT,WAAW,CAACU,WAAZ,CAAwBC,IAAxB,CAA6BC,CAAC,IAAIA,CAAC,CAACC,UAAF,KAAiBA,UAAnD,CAAhB;IACA,IAAI,CAACJ,OAAL,EAAc,OAAO,IAAP;IACd,MAAMK,KAAK,GAAGb,SAAS,CAACc,SAAV,CAAoBJ,IAApB,CAAyBK,CAAC,IAAIA,CAAC,CAACC,QAAF,KAAeR,OAAO,CAACQ,QAArD,CAAd;IACA,OAAOH,KAAK,GAAGA,KAAK,CAACI,UAAT,GAAsB,IAAlC;EACD,CALD;;EAOA,oBACI;IAAA,wBACA;MAAK,SAAS,EAAC,6BAAf;MAA6C,OAAO,EAAEd,gBAAtD;MAAA,wBACI;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADJ,eAEI,QAAC,GAAD;QAAK,IAAI,EAAEgB;MAAX;QAAA;QAAA;QAAA;MAAA,QAFJ,eAGI;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAHJ;IAAA;MAAA;MAAA;MAAA;IAAA,QADA,EAMClB,SAAS,iBACT;MAAO,SAAS,EAAC,oBAAjB;MAAA,wBACE;QAAA,uBACE;UAAA,wBACE;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QADF,eAEE;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAFF,eAGE;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAHF,eAIE;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAJF,eAKE;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QALF;QAAA;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QADF,eAUE;QAAA,UACGH,eAAe,CAACO,eAAhB,CAAgC4B,GAAhC,CAAoC1B,WAAW,iBAC9C;UAAA,wBACE;YAAA,UAAKA,WAAW,CAAC2B;UAAjB;YAAA;YAAA;YAAA;UAAA,QADF,eAEE;YAAA,UAAK3B,WAAW,CAACW;UAAjB;YAAA;YAAA;YAAA;UAAA,QAFF,eAGE;YAAA,UAAKX,WAAW,CAAC4B;UAAjB;YAAA;YAAA;YAAA;UAAA,QAHF,eAIE;YAAA,UAAK,QAAM5B,WAAW,CAACK,UAAlB,GAA6B,GAA7B,GAAiC,eAAjC,GAAiDiB,gBAAgB,CAACtB,WAAW,CAACK,UAAb,EAAyB,cAAzB;UAAtE;YAAA;YAAA;YAAA;UAAA,QAJF,eAKE;YAAA,UAAKoB,YAAY,CAACzB,WAAW,CAACK,UAAb;UAAjB;YAAA;YAAA;YAAA;UAAA,QALF;QAAA,GAASL,WAAW,CAAC2B,cAArB;UAAA;UAAA;UAAA;QAAA,QADD;MADH;QAAA;QAAA;QAAA;MAAA,QAVF;IAAA;MAAA;MAAA;MAAA;IAAA,QAPD;EAAA,gBADJ;AAiCH;;GAjGuBtC,Y;UACcP,Q,EACJA,Q,EACFA,Q;;;KAHRO,Y"},"metadata":{},"sourceType":"module"}