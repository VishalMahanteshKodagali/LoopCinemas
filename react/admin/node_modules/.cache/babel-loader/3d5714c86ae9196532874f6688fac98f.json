{"ast":null,"code":"var _jsxFileName = \"/Users/vishalmahanteshkodagali/Documents/RMIT/Sem 3/Full Stack Development/Assignment/Git_s3895036/loop-web-s3904406/react/admin/src/pages/UserList.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport gql from 'graphql-tag';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport '../Style/UserList.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GET_USERS = gql`\n  {\n    getUsers {\n      username\n      email\n      role\n      isBlocked\n    }\n  }\n`;\nconst UPDATE_USER_BLOCK_STATUS = gql`\n  mutation updateUserBlockStatus($username: String!, $isBlocked: Int!) {\n    updateUserBlockStatus(username: $username, isBlocked: $isBlocked) {\n      username\n      isBlocked\n    }\n  }\n`;\n\nfunction UserList() {\n  _s();\n\n  const [updateUserBlockStatus] = useMutation(UPDATE_USER_BLOCK_STATUS);\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(GET_USERS);\n\n  const handleBlockUser = (username, currentStatus) => {\n    updateUserBlockStatus({\n      variables: {\n        username: username,\n        isBlocked: currentStatus ? 0 : 1\n      }\n    }).then(response => {\n      console.log(`User ${username} block status updated to: ${response.data.updateUserBlockStatus.isBlocked}`);\n      window.location.reload();\n    }).catch(error => {\n      console.error(`Error updating block status for ${username}:`, error.message);\n    });\n  };\n\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 25\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: [\"Error: \", error.message]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"table\", {\n    className: \" Table-users\",\n    children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n      children: /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Role\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Is Blocked\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n          children: \"Block\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n      children: data.getUsers.filter(user => user.role === 'user').map(user => /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          children: user.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: user.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: user.role\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: user.isBlocked ? \"Yes\" : \"No\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-check form-switch\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"form-check-input\",\n              type: \"checkbox\",\n              id: `blockSwitch-${user.username}`,\n              checked: user.isBlocked,\n              onChange: () => handleBlockUser(user.username, user.isBlocked)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-check-label\",\n              htmlFor: `blockSwitch-${user.username}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this)]\n      }, user.username, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n\n_s(UserList, \"ZqIvyLjyipnAiR/pglnR3EOdwAU=\", false, function () {\n  return [useMutation, useQuery];\n});\n\n_c = UserList;\nexport default UserList;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserList\");","map":{"version":3,"names":["React","gql","useQuery","useMutation","GET_USERS","UPDATE_USER_BLOCK_STATUS","UserList","updateUserBlockStatus","loading","error","data","handleBlockUser","username","currentStatus","variables","isBlocked","then","response","console","log","window","location","reload","catch","message","getUsers","filter","user","role","map","email"],"sources":["/Users/vishalmahanteshkodagali/Documents/RMIT/Sem 3/Full Stack Development/Assignment/Git_s3895036/loop-web-s3904406/react/admin/src/pages/UserList.js"],"sourcesContent":["import React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport gql from 'graphql-tag';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport '../Style/UserList.css'; \n\n\nconst GET_USERS = gql`\n  {\n    getUsers {\n      username\n      email\n      role\n      isBlocked\n    }\n  }\n`;\n\nconst UPDATE_USER_BLOCK_STATUS = gql`\n  mutation updateUserBlockStatus($username: String!, $isBlocked: Int!) {\n    updateUserBlockStatus(username: $username, isBlocked: $isBlocked) {\n      username\n      isBlocked\n    }\n  }\n`;\n\n\n\nfunction UserList() {\n    const [updateUserBlockStatus] = useMutation(UPDATE_USER_BLOCK_STATUS);\n    const { loading, error, data } = useQuery(GET_USERS);\n   \n\n    const handleBlockUser = (username, currentStatus) => {\n        updateUserBlockStatus({\n            variables: {\n                username: username,\n                isBlocked: currentStatus ? 0 : 1\n            }\n        })\n        .then(response => {\n            console.log(`User ${username} block status updated to: ${response.data.updateUserBlockStatus.isBlocked}`);\n            window.location.reload();\n        }) \n        .catch(error => {\n            console.error(`Error updating block status for ${username}:`, error.message);\n        });\n      \n    };\n\n    if (loading) return <p>Loading...</p>;\n    if (error) return <p>Error: {error.message}</p>;\n\n  return (\n    <table className=' Table-users'>\n    <thead>\n        <tr>\n            <th>Username</th>\n            <th>Email</th>\n            <th>Role</th>\n            <th>Is Blocked</th>\n            <th>Block</th>\n        </tr>\n    </thead>\n    <tbody>\n    {data.getUsers.filter(user => user.role === 'user').map((user) => (\n        <tr key={user.username}>\n            <td>{user.username}</td>\n            <td>{user.email}</td>\n            <td>{user.role}</td>\n            <td>{user.isBlocked ? \"Yes\" : \"No\"}</td>\n            <td>\n                <div className=\"form-check form-switch\">\n                    <input \n                        className=\"form-check-input\" \n                        type=\"checkbox\" \n                        id={`blockSwitch-${user.username}`} \n                        checked={user.isBlocked} \n                        onChange={() => handleBlockUser(user.username, user.isBlocked)} \n                    />\n                    <label className=\"form-check-label\" htmlFor={`blockSwitch-${user.username}`}></label>\n                </div>\n            </td>\n        </tr>\n    ))} \n    </tbody>\n</table>\n\n  );\n}\n\nexport default UserList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}